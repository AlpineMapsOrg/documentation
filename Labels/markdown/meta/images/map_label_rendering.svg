<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1140px" preserveAspectRatio="none" style="width:1883px;height:1140px;" version="1.1" viewBox="0 0 1883 1140" width="1883px" zoomAndPan="magnify"><defs><filter height="300%" id="fdpvrzygydgc6" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[5a3bbf0d7091cd7a553e0617d3c8fdbb]
cluster nucleus--><polygon fill="#FFFFFF" filter="url(#fdpvrzygydgc6)" points="22,24,90,24,97,46.2969,1861,46.2969,1861,1128,22,1128,22,24" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="22" x2="97" y1="46.2969" y2="46.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="62" x="26" y="38.9951">nucleus</text><!--MD5=[d834082772847ab0941a616e0a3c77d7]
cluster nucleus.maplabel--><polygon fill="#FFFFFF" filter="url(#fdpvrzygydgc6)" points="46,67,122,67,129,89.2969,1837,89.2969,1837,1104,46,1104,46,67" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="46" x2="129" y1="89.2969" y2="89.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="70" x="50" y="81.9951">maplabel</text><!--MD5=[3f48f851ba0a656eed8554a052c49294]
class nucleus.maplabel.Charset--><rect fill="#FEFECE" filter="url(#fdpvrzygydgc6)" height="188.8516" id="nucleus.maplabel.Charset" style="stroke: #A80036; stroke-width: 1.5;" width="381" x="1107.5" y="153"/><ellipse cx="1269.25" cy="169" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1272.2188,174.6406 Q1271.6406,174.9375 1271,175.0781 Q1270.3594,175.2344 1269.6563,175.2344 Q1267.1563,175.2344 1265.8281,173.5938 Q1264.5156,171.9375 1264.5156,168.8125 Q1264.5156,165.6875 1265.8281,164.0313 Q1267.1563,162.375 1269.6563,162.375 Q1270.3594,162.375 1271,162.5313 Q1271.6563,162.6875 1272.2188,162.9844 L1272.2188,165.7031 Q1271.5938,165.125 1271,164.8594 Q1270.4063,164.5781 1269.7813,164.5781 Q1268.4375,164.5781 1267.75,165.6563 Q1267.0625,166.7188 1267.0625,168.8125 Q1267.0625,170.9063 1267.75,171.9844 Q1268.4375,173.0469 1269.7813,173.0469 Q1270.4063,173.0469 1271,172.7813 Q1271.5938,172.5 1272.2188,171.9219 L1272.2188,174.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="49" x="1289.75" y="173.1543">Charset</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1108.5" x2="1487.5" y1="185" y2="185"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1115.5" y="193"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="198" x="1127.5" y="199.2104">m_file_mutex : mutable std::mutex</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1115.5" y="205.8047"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="191" x="1127.5" y="212.0151">m_all_chars : std::set&lt;char16_t&gt;</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1108.5" x2="1487.5" y1="218.6094" y2="218.6094"/><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1115.5" y="226.6094"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="53" x="1127.5" y="232.8198">Charset()</text><ellipse cx="1118.5" cy="242.4141" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="147" x="1127.5" y="245.6245">get_instance() : Charset&amp;</text><ellipse cx="1118.5" cy="255.2188" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="275" x="1127.5" y="258.4292">is_update_necessary(std::size_t last_size) : bool</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1115.5" y="265.0234"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="251" x="1127.5" y="271.2339">charset_cache_path() : std::filesystem::path</text><ellipse cx="1118.5" cy="280.8281" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="182" x="1127.5" y="284.0386">all_chars() : std::set&lt;char16_t&gt;</text><ellipse cx="1118.5" cy="293.6328" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="355" x="1127.5" y="296.8433">char_diff(std::set&lt;char16_t&gt;&amp; compare) : std::set&lt;char16_t&gt;</text><ellipse cx="1118.5" cy="306.4375" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="288" x="1127.5" y="309.6479">add_chars(std::set&lt;char16_t&gt;&amp; new_chars) : void</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1115.5" y="316.2422"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="60" x="1127.5" y="322.4526">init() : void</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1115.5" y="329.0469"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="266" x="1127.5" y="335.2573">load(const std::filesystem::path filepath) : void</text><!--MD5=[11e7dc11a5dcf722b46eea5e1f502874]
class nucleus.maplabel.FontRenderer--><rect fill="#FEFECE" filter="url(#fdpvrzygydgc6)" height="291.2891" id="nucleus.maplabel.FontRenderer" style="stroke: #A80036; stroke-width: 1.5;" width="368" x="273" y="453"/><ellipse cx="409.75" cy="469" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M412.7188,474.6406 Q412.1406,474.9375 411.5,475.0781 Q410.8594,475.2344 410.1563,475.2344 Q407.6563,475.2344 406.3281,473.5938 Q405.0156,471.9375 405.0156,468.8125 Q405.0156,465.6875 406.3281,464.0313 Q407.6563,462.375 410.1563,462.375 Q410.8594,462.375 411.5,462.5313 Q412.1563,462.6875 412.7188,462.9844 L412.7188,465.7031 Q412.0938,465.125 411.5,464.8594 Q410.9063,464.5781 410.2813,464.5781 Q408.9375,464.5781 408.25,465.6563 Q407.5625,466.7188 407.5625,468.8125 Q407.5625,470.9063 408.25,471.9844 Q408.9375,473.0469 410.2813,473.0469 Q410.9063,473.0469 411.5,472.7813 Q412.0938,472.5 412.7188,471.9219 L412.7188,474.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="86" x="430.25" y="473.1543">FontRenderer</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="274" x2="640" y1="485" y2="485"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="281" y="493"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="132" x="293" y="499.2104">m_font_data : FontData</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="281" y="505.8047"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="138" x="293" y="512.0151">m_font_file : QByteArray</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="281" y="518.6094"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="95" x="293" y="524.8198">m_bottom_y : int</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="281" y="531.4141"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="127" x="293" y="537.6245">m_outline_margin : int</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="281" y="544.2188"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="119" x="293" y="550.4292">m_texture_index : int</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="281" y="557.0234"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="49" x="293" y="563.2339">m_x : int</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="281" y="569.8281"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="49" x="293" y="576.0386">m_y : int</text><ellipse cx="284" cy="585.6328" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="240" x="293" y="588.8433">m_font_atlas_size : static constexpr QSize</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="281" y="595.4375"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="215" x="293" y="601.6479">m_font_outline : static constexpr float</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="281" y="608.2422"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="234" x="293" y="614.4526">m_uv_width_norm : static constexpr float</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="281" y="621.0469"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="255" x="293" y="627.2573">m_font_padding : static constexpr glm::ivec2</text><ellipse cx="284" cy="636.8516" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="215" x="293" y="640.062">m_max_textures : static constexpr int</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="281" y="646.6563"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="288" x="293" y="652.8667">m_font_atlas : std::vector&lt;Raster&lt;glm::u8vec2&gt;&gt;</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="274" x2="640" y1="659.4609" y2="659.4609"/><ellipse cx="284" cy="670.4609" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="133" x="293" y="673.6714">font_data() : FontData&amp;</text><ellipse cx="284" cy="683.2656" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="279" x="293" y="686.4761">font_atlas() : std::vector&lt;Raster&lt;glm::u8vec2&gt;&gt;</text><ellipse cx="284" cy="696.0703" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="60" x="293" y="699.2808">init() : void</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="281" y="705.875"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="265" x="293" y="712.0854">make_outline(std::set&lt;char16_t&gt; chars) : void</text><ellipse cx="284" cy="721.6797" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="315" x="293" y="724.8901">render(std::set&lt;char16_t&gt; chars, float font_size) : void</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="281" y="731.4844"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="342" x="293" y="737.6948">render_text(std::set&lt;char16_t&gt; chars, float font_size) : void</text><!--MD5=[bbe099e6b61407ce4d8e0d94810a3032]
class nucleus.maplabel.LabelFactory--><rect fill="#FEFECE" filter="url(#fdpvrzygydgc6)" height="291.2891" id="nucleus.maplabel.LabelFactory" style="stroke: #A80036; stroke-width: 1.5;" width="1010" x="62" y="102"/><ellipse cx="523.25" cy="118" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M526.2188,123.6406 Q525.6406,123.9375 525,124.0781 Q524.3594,124.2344 523.6563,124.2344 Q521.1563,124.2344 519.8281,122.5938 Q518.5156,120.9375 518.5156,117.8125 Q518.5156,114.6875 519.8281,113.0313 Q521.1563,111.375 523.6563,111.375 Q524.3594,111.375 525,111.5313 Q525.6563,111.6875 526.2188,111.9844 L526.2188,114.7031 Q525.5938,114.125 525,113.8594 Q524.4063,113.5781 523.7813,113.5781 Q522.4375,113.5781 521.75,114.6563 Q521.0625,115.7188 521.0625,117.8125 Q521.0625,119.9063 521.75,120.9844 Q522.4375,122.0469 523.7813,122.0469 Q524.4063,122.0469 525,121.7813 Q525.5938,121.5 526.2188,120.9219 L526.2188,123.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="79" x="543.75" y="122.1543">LabelFactory</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="63" x2="1071" y1="134" y2="134"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="70" y="142"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="132" x="82" y="148.2104">m_font_data : FontData</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="70" y="154.8047"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="183" x="82" y="161.0151">m_font_renderer : FontRenderer</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="70" y="167.6094"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="199" x="82" y="173.8198">m_font_size : constexpr static float</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="70" y="180.4141"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="230" x="82" y="186.6245">m_icon_size : constexpr static glm::vec2</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="70" y="193.2188"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="162" x="82" y="199.4292">m_last_char_amount : size_t</text><ellipse cx="73" cy="209.0234" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="322" x="82" y="212.2339">m_indices : static const inline std::vector&lt;unsigned int&gt;</text><ellipse cx="73" cy="221.8281" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="322" x="82" y="225.0386">m_indices : static const inline std::vector&lt;unsigned int&gt;</text><ellipse cx="73" cy="234.6328" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="322" x="82" y="237.8433">m_indices : static const inline std::vector&lt;unsigned int&gt;</text><ellipse cx="73" cy="247.4375" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="322" x="82" y="250.6479">m_indices : static const inline std::vector&lt;unsigned int&gt;</text><ellipse cx="73" cy="260.2422" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="322" x="82" y="263.4526">m_indices : static const inline std::vector&lt;unsigned int&gt;</text><ellipse cx="73" cy="273.0469" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="322" x="82" y="276.2573">m_indices : static const inline std::vector&lt;unsigned int&gt;</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="70" y="282.8516"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="191" x="82" y="289.062">m_all_chars : std::set&lt;char16_t&gt;</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="70" y="295.6563"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="345" x="82" y="301.8667">m_icon_uvs : std::unordered_map&lt;FeatureType, glm::vec4&gt;</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="63" x2="1071" y1="308.4609" y2="308.4609"/><ellipse cx="73" cy="319.4609" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="153" x="82" y="322.6714">init_font_atlas() : AtlasData</text><ellipse cx="73" cy="332.2656" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="171" x="82" y="335.4761">renew_font_atlas() : AtlasData</text><ellipse cx="73" cy="345.0703" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="207" x="82" y="348.2808">label_icons() : Raster&lt;glm::u8vec4&gt;</text><ellipse cx="73" cy="357.875" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="390" x="82" y="361.0854">create_labels(const VectorTile&amp; features) : std::vector&lt;VertexData&gt;</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="70" y="367.6797"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="475" x="82" y="373.8901">create_text_meta(std::u16string* safe_chars, float* text_width) : std::vector&lt;float&gt;</text><ellipse cx="73" cy="383.4844" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="984" x="82" y="386.6948">create_label(const QString text, const glm::vec3 position, FeatureType type, const uint32_t internal_id, const float importance, std::vector&lt;VertexData&gt;&amp; vertex_data) : void</text><!--MD5=[34d435fdb931a7ad7655bd3a993503a4]
class nucleus.maplabel.AtlasData--><rect fill="#FEFECE" filter="url(#fdpvrzygydgc6)" height="73.6094" id="nucleus.maplabel.AtlasData" style="stroke: #A80036; stroke-width: 1.5;" width="297" x="1523.5" y="210.5"/><ellipse cx="1637.25" cy="226.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1640.2188,232.1406 Q1639.6406,232.4375 1639,232.5781 Q1638.3594,232.7344 1637.6563,232.7344 Q1635.1563,232.7344 1633.8281,231.0938 Q1632.5156,229.4375 1632.5156,226.3125 Q1632.5156,223.1875 1633.8281,221.5313 Q1635.1563,219.875 1637.6563,219.875 Q1638.3594,219.875 1639,220.0313 Q1639.6563,220.1875 1640.2188,220.4844 L1640.2188,223.2031 Q1639.5938,222.625 1639,222.3594 Q1638.4063,222.0781 1637.7813,222.0781 Q1636.4375,222.0781 1635.75,223.1563 Q1635.0625,224.2188 1635.0625,226.3125 Q1635.0625,228.4063 1635.75,229.4844 Q1636.4375,230.5469 1637.7813,230.5469 Q1638.4063,230.5469 1639,230.2813 Q1639.5938,230 1640.2188,229.4219 L1640.2188,232.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="61" x="1657.75" y="230.6543">AtlasData</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1524.5" x2="1819.5" y1="242.5" y2="242.5"/><ellipse cx="1534.5" cy="253.5" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="84" x="1543.5" y="256.7104">changed : bool</text><ellipse cx="1534.5" cy="266.3047" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="271" x="1543.5" y="269.5151">font_atlas : std::vector&lt;Raster&lt;glm::u8vec2&gt;&gt;</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1524.5" x2="1819.5" y1="276.1094" y2="276.1094"/><!--MD5=[33c8d84d5c9eb6e31f52db7b2526a99b]
class nucleus.maplabel.CharData--><rect fill="#FEFECE" filter="url(#fdpvrzygydgc6)" height="137.6328" id="nucleus.maplabel.CharData" style="stroke: #A80036; stroke-width: 1.5;" width="128" x="503" y="950"/><ellipse cx="534.65" cy="966" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M537.6188,971.6406 Q537.0406,971.9375 536.4,972.0781 Q535.7594,972.2344 535.0563,972.2344 Q532.5563,972.2344 531.2281,970.5938 Q529.9156,968.9375 529.9156,965.8125 Q529.9156,962.6875 531.2281,961.0313 Q532.5563,959.375 535.0563,959.375 Q535.7594,959.375 536.4,959.5313 Q537.0563,959.6875 537.6188,959.9844 L537.6188,962.7031 Q536.9938,962.125 536.4,961.8594 Q535.8063,961.5781 535.1813,961.5781 Q533.8375,961.5781 533.15,962.6563 Q532.4625,963.7188 532.4625,965.8125 Q532.4625,967.9063 533.15,968.9844 Q533.8375,970.0469 535.1813,970.0469 Q535.8063,970.0469 536.4,969.7813 Q536.9938,969.5 537.6188,968.9219 L537.6188,971.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="59" x="552.35" y="970.1543">CharData</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="504" x2="630" y1="982" y2="982"/><ellipse cx="514" cy="993" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="58" x="523" y="996.2104">xoff : float</text><ellipse cx="514" cy="1005.8047" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="58" x="523" y="1009.0151">yoff : float</text><ellipse cx="514" cy="1018.6094" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="102" x="523" y="1021.8198">texture_index : int</text><ellipse cx="514" cy="1031.4141" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="92" x="523" y="1034.6245">height : uint16_t</text><ellipse cx="514" cy="1044.2188" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="87" x="523" y="1047.4292">width : uint16_t</text><ellipse cx="514" cy="1057.0234" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="63" x="523" y="1060.2339">x : uint16_t</text><ellipse cx="514" cy="1069.8281" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="63" x="523" y="1073.0386">y : uint16_t</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="504" x2="630" y1="1079.6328" y2="1079.6328"/><!--MD5=[30f008d9ebdfd2597a580f67fc5e85db]
class nucleus.maplabel.FontData--><rect fill="#FEFECE" filter="url(#fdpvrzygydgc6)" height="86.4141" id="nucleus.maplabel.FontData" style="stroke: #A80036; stroke-width: 1.5;" width="338" x="398" y="804"/><ellipse cx="533.75" cy="820" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M536.7188,825.6406 Q536.1406,825.9375 535.5,826.0781 Q534.8594,826.2344 534.1563,826.2344 Q531.6563,826.2344 530.3281,824.5938 Q529.0156,822.9375 529.0156,819.8125 Q529.0156,816.6875 530.3281,815.0313 Q531.6563,813.375 534.1563,813.375 Q534.8594,813.375 535.5,813.5313 Q536.1563,813.6875 536.7188,813.9844 L536.7188,816.7031 Q536.0938,816.125 535.5,815.8594 Q534.9063,815.5781 534.2813,815.5781 Q532.9375,815.5781 532.25,816.6563 Q531.5625,817.7188 531.5625,819.8125 Q531.5625,821.9063 532.25,822.9844 Q532.9375,824.0469 534.2813,824.0469 Q534.9063,824.0469 535.5,823.7813 Q536.0938,823.5 536.7188,822.9219 L536.7188,825.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="58" x="554.25" y="824.1543">FontData</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="399" x2="735" y1="836" y2="836"/><ellipse cx="409" cy="847" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="122" x="418" y="850.2104">uv_width_norm : float</text><ellipse cx="409" cy="859.8047" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="130" x="418" y="863.0151">fontinfo : stbtt_fontinfo</text><ellipse cx="409" cy="872.6094" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="312" x="418" y="875.8198">char_data : std::unordered_map&lt;char16_t, CharData&gt;</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="399" x2="735" y1="882.4141" y2="882.4141"/><!--MD5=[32e73e74647303a3515251e7dff152a4]
class nucleus.maplabel.VertexData--><rect fill="#FEFECE" filter="url(#fdpvrzygydgc6)" height="124.8281" id="nucleus.maplabel.VertexData" style="stroke: #A80036; stroke-width: 1.5;" width="175" x="1210.5" y="536"/><ellipse cx="1258.75" cy="552" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1261.7188,557.6406 Q1261.1406,557.9375 1260.5,558.0781 Q1259.8594,558.2344 1259.1563,558.2344 Q1256.6563,558.2344 1255.3281,556.5938 Q1254.0156,554.9375 1254.0156,551.8125 Q1254.0156,548.6875 1255.3281,547.0313 Q1256.6563,545.375 1259.1563,545.375 Q1259.8594,545.375 1260.5,545.5313 Q1261.1563,545.6875 1261.7188,545.9844 L1261.7188,548.7031 Q1261.0938,548.125 1260.5,547.8594 Q1259.9063,547.5781 1259.2813,547.5781 Q1257.9375,547.5781 1257.25,548.6563 Q1256.5625,549.7188 1256.5625,551.8125 Q1256.5625,553.9063 1257.25,554.9844 Q1257.9375,556.0469 1259.2813,556.0469 Q1259.9063,556.0469 1260.5,555.7813 Q1261.0938,555.5 1261.7188,554.9219 L1261.7188,557.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="70" x="1279.25" y="556.1543">VertexData</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1211.5" x2="1384.5" y1="568" y2="568"/><ellipse cx="1221.5" cy="579" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="101" x="1230.5" y="582.2104">importance : float</text><ellipse cx="1221.5" cy="591.8047" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="149" x="1230.5" y="595.0151">world_position : glm::vec3</text><ellipse cx="1221.5" cy="604.6094" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="135" x="1230.5" y="607.8198">picker_color : glm::vec4</text><ellipse cx="1221.5" cy="617.4141" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="112" x="1230.5" y="620.6245">position : glm::vec4</text><ellipse cx="1221.5" cy="630.2188" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="80" x="1230.5" y="633.4292">uv : glm::vec4</text><ellipse cx="1221.5" cy="643.0234" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="126" x="1230.5" y="646.2339">texture_index : int32_t</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1211.5" x2="1384.5" y1="652.8281" y2="652.8281"/><!--MD5=[640f5e97e5939f6dc2ec8b039be79cbf]
reverse link nucleus.maplabel.FontData to nucleus.maplabel.CharData--><path d="M567,903.19 C567,918.01 567,934.22 567,949.67 " fill="none" id="nucleus.maplabel.FontData&lt;-nucleus.maplabel.CharData" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="567,890.02,563,896.02,567,902.02,571,896.02,567,890.02" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[fcb7b95b62c050ccb3ec6089707b074e]
reverse link nucleus.maplabel.FontRenderer to nucleus.maplabel.FontData--><path d="M526.99,756.34 C534.66,773.53 541.91,789.77 548.07,803.59 " fill="none" id="nucleus.maplabel.FontRenderer&lt;-nucleus.maplabel.FontData" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="521.62,744.32,520.4135,751.4295,526.512,755.2776,527.7185,748.1681,521.62,744.32" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[e61cdbe50ff86ef0d3d1c022b5ec3dfa]
reverse link nucleus.maplabel.LabelFactory to nucleus.maplabel.FontData--><path d="M645.5,405.66 C650.96,421.36 655.63,437.31 659,453 C686.13,579.45 705.4,623.28 659,744 C650.36,766.48 634.22,787.1 617.84,803.83 " fill="none" id="nucleus.maplabel.LabelFactory&lt;-nucleus.maplabel.FontData" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="640.96,393.13,639.2447,400.1341,645.0503,404.4114,646.7656,397.4072,640.96,393.13" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[90b116d2933e74d72ca1a0e18002ad89]
reverse link nucleus.maplabel.LabelFactory to nucleus.maplabel.FontRenderer--><path d="M517.44,405.73 C512.5,421.4 507.51,437.25 502.62,452.78 " fill="none" id="nucleus.maplabel.LabelFactory&lt;-nucleus.maplabel.FontRenderer" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="521.39,393.22,515.7694,397.7376,517.7777,404.6634,523.3983,400.1458,521.39,393.22" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[fd7d1e9d0f4bf175d5f2a65cbbfe6559]
link nucleus.maplabel.Charset to nucleus.maplabel.AtlasData--><!--MD5=[126b63463dfbdb5b894a192a4c4857ec]
link nucleus.maplabel.Charset to nucleus.maplabel.VertexData--><!--MD5=[e0f6b77559f9d9e916fe533d1d09710e]
@startuml






namespace nucleus {
	namespace maplabel {
		class Charset {
			-Charset()
			+{static} get_instance() : Charset&
			+is_update_necessary(std::size_t last_size) : bool
			-m_file_mutex : mutable std::mutex
			-charset_cache_path() : std::filesystem::path
			+all_chars() : std::set<char16_t>
			+char_diff(std::set<char16_t>& compare) : std::set<char16_t>
			-m_all_chars : std::set<char16_t>
			+add_chars(std::set<char16_t>& new_chars) : void
			-init() : void
			-load(const std::filesystem::path filepath) : void
		}

		class FontRenderer {
			-m_font_data : FontData
			+font_data() : FontData&
			-m_font_file : QByteArray
			-m_bottom_y : int
			-m_outline_margin : int
			-m_texture_index : int
			-m_x : int
			-m_y : int
			+{static} m_font_atlas_size : static constexpr QSize
			-{static} m_font_outline : static constexpr float
			-{static} m_uv_width_norm : static constexpr float
			-{static} m_font_padding : static constexpr glm::ivec2
			+{static} m_max_textures : static constexpr int
			+font_atlas() : std::vector<Raster<glm::u8vec2>>
			-m_font_atlas : std::vector<Raster<glm::u8vec2>>
			+init() : void
			-make_outline(std::set<char16_t> chars) : void
			+render(std::set<char16_t> chars, float font_size) : void
			-render_text(std::set<char16_t> chars, float font_size) : void
		}

		class LabelFactory {
			+init_font_atlas() : AtlasData
			+renew_font_atlas() : AtlasData
			-m_font_data : FontData
			-m_font_renderer : FontRenderer
			+label_icons() : Raster<glm::u8vec4>
			-{static} m_font_size : constexpr static float
			-{static} m_icon_size : constexpr static glm::vec2
			-m_last_char_amount : size_t
			+{static} m_indices : static const inline std::vector<unsigned int>
			+{static} m_indices : static const inline std::vector<unsigned int>
			+{static} m_indices : static const inline std::vector<unsigned int>
			+{static} m_indices : static const inline std::vector<unsigned int>
			+{static} m_indices : static const inline std::vector<unsigned int>
			+{static} m_indices : static const inline std::vector<unsigned int>
			-m_all_chars : std::set<char16_t>
			-m_icon_uvs : std::unordered_map<FeatureType, glm::vec4>
			+create_labels(const VectorTile& features) : std::vector<VertexData>
			-create_text_meta(std::u16string* safe_chars, float* text_width) : std::vector<float>
			+create_label(const QString text, const glm::vec3 position, FeatureType type, const uint32_t internal_id, const float importance, std::vector<VertexData>& vertex_data) : void
		}

		class AtlasData {
			+changed : bool
			+font_atlas : std::vector<Raster<glm::u8vec2>>
		}

		class CharData {
			+xoff : float
			+yoff : float
			+texture_index : int
			+height : uint16_t
			+width : uint16_t
			+x : uint16_t
			+y : uint16_t
		}

		class FontData {
			+uv_width_norm : float
			+fontinfo : stbtt_fontinfo
			+char_data : std::unordered_map<char16_t, CharData>
		}

		class VertexData {
			+importance : float
			+world_position : glm::vec3
			+picker_color : glm::vec4
			+position : glm::vec4
			+uv : glm::vec4
			+texture_index : int32_t
		}
	}
}










nucleus.maplabel.FontData *- - nucleus.maplabel.CharData


nucleus.maplabel.FontRenderer *- - nucleus.maplabel.FontData


nucleus.maplabel.LabelFactory *- - nucleus.maplabel.FontData


nucleus.maplabel.LabelFactory *- - nucleus.maplabel.FontRenderer









@enduml

PlantUML version 1.2020.02(Sun Mar 01 11:22:07 CET 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 21.0.4+7-Ubuntu-1ubuntu222.04
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>